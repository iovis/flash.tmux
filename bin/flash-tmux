#!/usr/bin/env bash
set -euo pipefail

ROOT="$(cd "$(dirname "${BASH_SOURCE[0]}")/.." && pwd)"
BIN_RELEASE="$ROOT/target/release/flash-tmux"
BIN_DEBUG="$ROOT/target/debug/flash-tmux"

if [ -x "$BIN_RELEASE" ]; then
  exec "$BIN_RELEASE" "$@"
fi

if [ -x "$BIN_DEBUG" ]; then
  exec "$BIN_DEBUG" "$@"
fi

exec cargo run --quiet --release --manifest-path "$ROOT/Cargo.toml" -- "$@"
